<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>IOU</title><meta name=viewport content="width=device-width"><link rel=icon type=image/x-icon href=favicon.ico><link rel=stylesheet href=/css/main.4d2a.css></head><body><div class=docs><ul class=menu><li><a href=/docs class=menu-title>IOU Docs</a></li><li><a href=/chapter/chapter-1.html>Chapter 1</a></li><li><a href=/chapter/chapter-2.html>Chapter 2</a></li><li><a href=/chapter/chapter-3.html>Chapter 3</a></li><li><a href=/chapter/chapter-4.html>Chapter 4</a></li><li><a href=/chapter/chapter-5.html>Chapter 5</a></li><li><a href=/chapter/chapter-6.html>Chapter 6</a></li><li><a href=/chapter/chapter-7.html>Chapter 7</a></li><li><a href=/chapter/chapter-8.html>Chapter 8</a></li><li><a href=/chapter/chapter-9.html>Chapter 9</a></li><li><a href=/chapter/chapter-10.html>Chapter 10</a></li><li><a href=/pdf/index.pdf>Download PDF <i class="fa fa-download"></i></a></li></ul><div class=content><div class=padded><h1>Chapter 3</h1><h2>Research/Development Method</h2><p>Chapter two described the problem domain, this chapter explains the rationale behing the technological decisions taken in order to achieve the best results in the implementation of IOU.</p><h3>The functional requirements</h3><p>IOU is mostly an online application, user data gets saved in the server and devices being used to access the data should be ubiquitous, that is, accessible from both a native mobile applicatoin or from a web appliation running on a browser.</p><p>The application should only allow login and registration via Facebook and the presence of websockets is a big plus, so that users do not need to refresh their views in order to see the most up-to-date information, much like a chat room.</p><p>Users should be able to create an unlimited amount of lists, on which they can add both members and products. Each list will also have a name and an icon associated to them. Both of which are editable. A list can only be viewed, edited or closed by their members.</p><p>Once a product is added to a list, it should be treated as an item that is still due to be bought. Any user from any given list can &#39;buy&#39; those products. Adding or editing the price and name of any product, both bought and due to be bought, can be done at any time. There should be a timestamp for each bought product that has been edited, staing the last time it was edited, any bought product that has been edited should display this timestamp.</p><p>Every list should also have a members view, where more members can be added and it should clearly state the breakdown of how much each member owes or is owed in relation to the user currently logged in.</p><p>The main list view should display the current user overall balance, that is, taking into account all lists he/she belongs to. Within the single list views, the overall balanced presented should be constrained to the current list.</p><p>The Login page, Terms and conditions of usage an Privacy Policy pages should be open to the public, however, all other pages should be private.</p><p>A left navigation menu should be present on all private pages, showing the picture and name of who is logged in as well as links to the home view, the terms and conditions view, the privacy policy view and a logout feature, that should clear all local storage data, logout the user and redirect to the login page.</p><p>A go home button should be present on all screens to aid navigation.</p><p>The main action of each page should be presented in a block button in the bottom of each page.</p><h3>The backend technology choices</h3><p>There is no doubt that to achieve it, data should be provided by means of a Web Service Restful API, where the endpoints expose data in a convinient JSON format to be consumed by either a native moblie application or from a web application running on a browser. However, the options on how to implent such structure are endless. Below is a list of the choices and the rationale behind them:</p><ul><li><p>PHP backend using Laravel:</p><ul><li>Pros: This would&#39;ve been the easiest solution, Laravel is a very flexible framework that provides powerful and yet simple to use features. It&#39;s routing system could easily cater for the nescessities of IOU, queues are easy to integrate and packages such as socialite can take care of the Facebook authentication.</li><li>Cons: Although there is a possibility to use other databases, MySQL is still the predominant option within the PHP world. Websockets are rather difficult to integrate. Even though HHVM can compile PHP code to C, it still lacks the extra speed boost nescessary for a real time app.</li></ul></li><li><p>Node.js:</p><ul><li>Pros: Works really well with noSQL databases and websockets. Frameworks like Sails make it really easy to create and expose a Restful API and it performs quite well in terms of speed.</li><li>Cons: Not as easy as with PHP to find a suitable free server to start the work.</li></ul></li><li><p>Firebase:</p><ul><li>Pros: No need to write an API, store your data on Firebase, set up your security rules and you are ready to go. Full support for websockets and Facebook integration. Fast speed from noSQL databases and the entry plan is free of charge.</li><li>Cons: If you want to process anything other than data, such as images and payment, you will still need a backend system other than Firebase. As your application expands plans become more expensive.</li></ul></li></ul><h3>The frontend technology choices</h3><p>For the frontend app, the choices were more limited, that is, in order to run a native application on a phone, one must develop constrained to the architecture he/she is writting if for. For example, Java is the native environment for Android apps and iOS developers have a choice between Swift and Objective-C.</p><p>Another option was to create a hybrid phone application, that is, write it using common web application technologies such as HTML, CSS and JavaScript, then compile it using either PhoneGap or Apache Cordova to run in an in-app browser. As a side note, PhoneGap is a branch from the open source project Apache Cordova administered by Adobe.</p><p>The last option was to use Titanium AppCelerator, which sits somewhere in between a native and a hybrid application, Titanium exposes a JavaScript API and converts them to the native function calls to the target architecture on compiling time.</p><p>Despite having to choose which is frontend technology is best suited for IOU, one more element had to be considered. That is, the addition of a framework that would allow faster development and provide amenites such as high level abstractions for the platform and testing facilities. This is specially important, since the app has to run on more than one platform, including web.</p><p>At this point, the idea of using either a native application solution or Titanium, were begining to fade, native apps would be constrained to one architecture only and therefore, have to be re-developed for every other platform I would want to have it deployed to. Titanium, solves that problem, but falls short if you want to deploy your app to the web. Not to mention a rather cryptic API.</p><p>That&#39;s when I came across Ionic, Ionic is a frontend SDK for developing hybrid mobile apps. Framewoks such as Lungo and Topcoat, do cover part of what Ionic does, that is, they provide consistent widgets that can be used interchangeably throughout different platforms. However, Ionic goes the extra mile, not only providing frontend widgets, but also exposing and API that wraps Apache Cordova and a tight integration with Angular.js, making it the ultimate production tool when the subject comes to developing hybrid phone applications.</p><h3>The decisions</h3><p>The final choice was to stick to Ionic for the frontend and Firebase for the backend.</p><p>The main rationale behind this decision was how both technologies combine and complement each other. Firebase provides a driver that integrates with Angular.js, converting it into a true 3-way data binding tool.</p><p>Angular.js is a tool backed up by Google which aims to structure JavaScript apps and impulse the development of applications that otherwise would be impossible to develop or to the very least take too long.</p><p>Besides, Angular&#39;s Eco System boasts a vibrant community, integration with Node.js workflow tools such as yeoman, bower and grunt are a breeze, E2E and Unit testing tools options are vast and Directives trully extend the vocabulary of HTML.</p><p>It still falls short in a sense that the application is not native, that is, some of the transition effects may not be as smooth as those provided natively and despite Firebase being a really interesting backend solution, in future, if the app needs to consume more powerfull features, such as image resize and integration with a payment gateway, Firebase will not sufice.</p><p>Nevertheless, the combination of those tools have been proven to be right for IOU, future improvements will dictate what other technologies will be used.</p><p>The diagram below represents the communication between the clients and the server. Every request that goes to Firebase must first satisfy the security rules. The double arrows represent the websockets:</p><p><img src=../img/sockets.b169.png alt=Fig1> <em>Fig 1 - Websockets architecture</em></p><h2>The workflow</h2><p>Now that the technologies have been chosen, an efficient workflow must be devised in order to maximize production and generate good quality builds. Below is a detailed list of the main technologies used for this application:</p><ul><li>Git<ul><li>Git-Flow</li></ul></li><li>Node.js<ul><li>lodash</li><li>mocha</li><li>corodova</li><li>chai</li><li>Yeoman</li><li>generator-ionic</li><li>Bower</li><li>Angular.js</li><li>Ionic</li><li>Firebase</li><li>Angular Fire</li><li>Firebase Simple Login</li><li>Angular Local Storage</li><li>Grunt</li><li>load-grunt-tasks</li><li>time-grunt</li><li>autoprefixer</li><li>bower-install</li><li>concurrent</li><li>contrib-clear</li><li>contrib-compass</li><li>contrib-concat</li><li>contrib-connect</li><li>contrib-copy</li><li>contrib-cssmin</li><li>contrib-htmlmin</li><li>contrib-jshint</li><li>contrib-uglify</li><li>contrib-watch</li><li>karma</li><li>newer</li><li>ngmin</li><li>usemin</li><li>stylish</li><li>Karma</li><li>karma-chai</li><li>karma-chrome-chai</li><li>karma-coverage</li><li>karma-mocha</li><li>karma-phantomjs-launcher</li></ul></li><li>Ruby Gems<ul><li>SASS</li><li>Compass</li></ul></li><li>Android SDK</li><li>iOS SDK</li></ul><p>In addition, the cordova inappbrowser plugin has also been installed to aid allow Facebook login with Firebase.</p></div></div></div><script src=/js/scripts.df94.js></script></body></html>